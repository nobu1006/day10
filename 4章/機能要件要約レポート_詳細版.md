# 機能要件 要約レポート（4章・テスト設計用）

本ドキュメントは「社内研修・セミナー申込管理システム」の機能要件（2.1〜2.8）を、テスト設計に必要な観点で整理・要約したものである。

---

## 1. ユーザー・ロール管理 (2.1)

### 1.1 機能の目的
利用者の識別、担当業務に応じた権限（ロール）の付与、および管理範囲の定義。

### 1.2 入力データ
| パラメータ | データ型 | 制約・条件 |
| :--- | :--- | :--- |
| 社員番号 | 文字列 | 必須 / 一意（重複不可） |
| 氏名 | 文字列 | 必須 |
| メールアドレス | 文字列 | 必須 / フォーマットチェック |
| 所属部門 | 文字列 | 必須 |
| ロール | 選択型 | 受講者、講師、研修管理者、システム管理者のいずれか（複数可） |

### 1.3 処理フロー
1.  **登録**: 人事システム連携または手動入力による登録。
2.  **権限割当**: 各ユーザーに対し1つ以上のロールを紐付ける（例：受講者 ＋ 講師）。
3.  **範囲設定**: 教育管理者に対し、管理対象とする部門を紐付ける。

### 1.4 出力データ
*   保存結果（成功/失敗メッセージ）、ユーザー情報一覧、権限マトリクス。

### 1.5 エラーハンドリング
*   **重複エラー**: 既に登録済みの社員番号で登録を試みた場合のエラー表示。
*   **権限エラー**: システム管理者以外が他者のロールを変更しようとした場合。

---

## 2. 会場・施設管理 (2.2)

### 2.1 機能の目的
研修で使用する物理的場所の情報を管理し、予約の重複を防止する。

### 2.2 入力データ
| パラメータ | データ型 | 制約・条件 |
| :--- | :--- | :--- |
| 会場コード | 文字列 | 必須 / 一意 |
| 会場名 / 所在地 | 文字列 | 必須 |
| 収容人数 | 数値 | 必須 / 正の整数 |
| 設備 | リスト | プロジェクター、ホワイトボード等 |

### 2.3 処理フロー
1.  **登録**: 会場基本情報を入力・保存。
2.  **整合性チェック**: 同一会場・同一日時に別の研修が登録されているか確認。
3.  **検索**: 人数や設備を条件に利用可能な会場を抽出。

### 2.4 出力データ
*   会場詳細、条件に合致する会場リスト、重複警告メッセージ。

### 2.5 エラーハンドリング
*   **重複警告**: 重複時に「上書き確認」のインターフェースを表示。

---

## 3. 研修の企画・登録 (2.3)

### 3.1 機能の目的
受講者に提供する研修コンテンツの詳細を定義し、公開制御を行う。

### 3.2 入力データ
| パラメータ | データ型 | 制約・条件 |
| :--- | :--- | :--- |
| 研修コード / タイトル | 文字列 | 必須 |
| 種別 | 選択型 | eラーニング / 集合研修 / セミナー |
| 申込期間 (開始/終了) | 日付 | 必須 |
| 開催日時 / 会場 / 講師 | リスト | 集合研修の場合に必須 |
| 定員 | 数値 | 必須 / 0以上 |

### 3.3 処理フロー
1.  **企画立案**: 情報を入力し「下書き」保存（編集可能）。
2.  **公開**: ステータスを「公開」に変更。受講者の一覧に表示される。
3.  **編集制限**: 申込者が発生した後は、重要項目（日時、定員減など）の変更を制限。

### 3.4 出力データ
*   研修詳細画面、公開済み研修リスト。

### 3.5 エラーハンドリング
*   **公開前エラー**: 必須項目（種別ごとの必要情報）が欠けている状態での公開防止。
*   **編集不可**: 申込ありの状態での不適切な項目変更のブロック。

---

## 4. 申込・キャンセル・待ち合わせ (2.4)

### 4.1 機能の目的
定員管理を伴う受講申込プロセスの制御。

### 4.2 入力データ
| パラメータ | 対象 | 制約・条件 |
| :--- | :--- | :--- |
| 申込リクエスト | 研修ID, 受講者ID | 重複申込不可 |
| キャンセル要求 | 申込ID | 開催日のN日前（3営業日等）まで |

### 4.3 処理フロー
1.  **申込判定**: 受講者の他研修との時間重複を警告。定員内なら「確定」、超過なら「待ち合わせ」。
2.  **キャンセル処理**: 申込ステータスを取り消しに変更。
3.  **自動繰り上げ**: キャンセルにより空きが出た場合、待ち合わせ順序最上位のユーザーを自動で「確定」に昇格。

### 4.4 出力データ
*   申込ステータス（確定/待ち合わせ）、繰り上げ通知メール、警告メッセージ。

### 4.5 エラーハンドリング
*   **二重確定の防止**: 同時申込ピーク時（50件/秒）でも定員を超えない排他制御。
*   **期限切れ**: キャンセル可能期間を過ぎたリクエストの拒否。

---

## 5. 受講履歴・成績・修了証 (2.5)

### 5.1 機能の目的
学習成果の記録と、公式な証明書（修了証）の発行。

### 5.2 入力データ
| パラメータ | データ型 | 制約・条件 |
| :--- | :--- | :--- |
| 成績 / 合否 | 数値/選択 | 講師または管理者が入力 |
| 修了証発行要求 | ID | 修了ステータス必須 |

### 5.3 処理フロー
1.  **評価入力**: 研修終了後、対象者の一覧に成績・合否を登録。
2.  **ステータス更新**: 「確定」から「修了」へ移行。
3.  **証書発行**: 受講者が自身の画面からPDFをダウンロード。

### 5.4 出力データ
*   修了証PDF、部門別受講集計リスト。

---

## 6. 通知・リマインダー (2.6)

### 6.1 機能の目的
重要イベント（申込確定・繰り上げ・開催直前）の自動メール通知による利便性向上。

### 6.2 処理フロー
1.  **イベントトリガー**: 申込確定、繰り上げ発生時に即時送信。
2.  **スケジュール起動**: 開催の前日または指定されたN日前にバッチ処理でリマインダーを送信。

---

## 7. 集計・レポート (2.7)

### 7.1 機能の目的
研修効果の分析や、部門の受講率把握のためのデータ出力。

### 7.2 出力データ（CSV）
*   部門別申込・修了数集計、受講履歴生データ。

### 7.3 エラーハンドリング
*   大量データ集計時のタイムアウト防止（30秒以内の処理）。

---

## 8. システム管理者機能 (2.8)

### 8.1 機能の目的
全データのガバナンス管理と、操作ログによる監査対応。

### 8.2 特権操作
*   全マスタ（全社研修、全ユーザー）の編集・削除権限。
*   操作ログ（いつ・誰が・どの申込を繰り上げた等）の参照。保持期間1年。
